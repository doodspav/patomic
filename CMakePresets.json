{
  "version": 1,
  "configurePresets": [
    {
      "name": "patomic-ci-base",
      "hidden": true,
      "binaryDir": "${sourceDir}/build",
      "cacheVariables": {
        "BUILD_TESTING": true,
        "CMAKE_C_STANDARD": "11",
        "CMAKE_C_STANDARD_REQUIRED": true,
        "CMAKE_C_EXTENSIONS": false,
        "CMAKE_CXX_STANDARD": "14",
        "CMAKE_CXX_STANDARD_REQUIRED": true,
        "CMAKE_CXX_EXTENSIONS": false
      }
    },
    {
      "name": "patomic-ci-base-skip-install",
      "hidden": true,
      "inherits": ["patomic-ci-base"],
      "cacheVariables": {
        "CMAKE_SKIP_INSTALL_RULES": true
      }
    },

    {
      "name": "patomic-ci-compiler-windows-clang",
      "hidden": true,
      "generator": "Visual Studio 17 2022",
      "cacheVariables": {
        "CMAKE_C_COMPILER": "clang-cl",
        "CMAKE_CXX_COMPILER": "clang-cl"
      }
    },
    {
      "name": "patomic-ci-compiler-windows-msvc",
      "hidden": true,
      "generator": "Visual Studio 17 2022",
      "cacheVariables": {
        "CMAKE_C_COMPILER": "cl",
        "CMAKE_CXX_COMPILER": "cl"
      }
    },
    {
      "name": "patomic-ci-compiler-unix-clang",
      "hidden": true,
      "generator": "Ninja",
      "cacheVariables": {
        "CMAKE_C_COMPILER": "clang",
        "CMAKE_CXX_COMPILER": "clang++"
      }
    },
    {
      "name": "patomic-ci-compiler-unix-gcc",
      "hidden": true,
      "generator": "Ninja",
      "cacheVariables": {
        "CMAKE_C_COMPILER": "gcc",
        "CMAKE_CXX_COMPILER": "g++"
      }
    },

    {
      "name": "patomic-ci-flags-clang",
      "hidden": true,
      "cacheVariables": {
        "CMAKE_C_FLAGS_INIT": "-Weverything -Werror -Wpedantic -Wno-c++98-compat -Wno-covered-switch-default -Wno-padded -Wno-unused-function -Wno-atomic-alignment -Wno-poison-system-directories",
        "CMAKE_CXX_FLAGS_INIT": "-Wall -Wextra -Werror -Wpedantic"
      }
    },
    {
      "name": "patomic-ci-flags-gcc",
      "hidden": true,
      "cacheVariables": {
        "CMAKE_C_FLAGS_INIT": "-Wall -Wextra -Werror -Wpedantic -Wshadow -Wcast-align -Wconversion -Wsign-conversion -Wnull-dereference -Wdouble-promotion -Wstrict-prototypes -Wmisleading-indentation -Wduplicated-branches -Wlogical-op -Wdeclaration-after-statement -Wno-unused-function",
        "CMAKE_CXX_FLAGS_INIT": "-Wall -Wextra -Werror -Wpedantic"
      }
    },
    {
      "name": "patomic-ci-flags-msvc",
      "hidden": true,
      "cacheVariables": {
        "CMAKE_C_FLAGS_INIT": "/permissive- /volatile:iso /Wall /WX /wd4464 /wd4132 /wd4820 /wd4127 /wd5045 /wd4710 /wd4711 /wd4668",
        "CMAKE_CXX_FLAGS_INIT": "/permissive- /volatile:iso /W4 /WX"
      }
    },

    {
      "name": "patomic-ci-windows-clang",
      "inherits": [
        "patomic-ci-base-skip-install",
        "patomic-ci-compiler-windows-clang",
        "patomic-ci-flags-msvc"
      ],
      "environment": {
        "LDFLAGS": "-fuse-ld=lld-link"
      }
    },
    {
      "name": "patomic-ci-windows-clang-coverage",
      "inherits": [
        "patomic-ci-base-skip-install",
        "patomic-ci-compiler-windows-clang",
        "patomic-ci-flags-msvc"
      ],
      "environment": {
        "CFLAGS": "-fprofile-instr-generate -fcoverage-mapping",
        "CXXFLAGS": "-fprofile-instr-generate -fcoverage-mapping",
        "LDFLAGS": "-fprofile-instr-generate -fcoverage-mapping -fuse-ld=lld-link"
      }
    },
    {
      "name": "patomic-ci-windows-clang-sanitize",
      "inherits": [
        "patomic-ci-base-skip-install",
        "patomic-ci-compiler-windows-clang",
        "patomic-ci-flags-msvc"
      ],
      "environment": {
        "CFLAGS": "-fsanitize=address,undefined -fno-sanitize-recover -fno-omit-frame-pointer",
        "CXXFLAGS": "-fsanitize=address,undefined -fno-sanitize-recover -fno-omit-frame-pointer",
        "LDFLAGS": "-fsanitize=address,undefined -fuse-ld=lld-link"
      }
    },
    {
      "name": "patomic-ci-windows-msvc",
      "inherits": [
        "patomic-ci-base",
        "patomic-ci-compiler-windows-msvc",
        "patomic-ci-flags-msvc"
      ]
    },

    {
      "name": "patomic-ci-unix-clang",
      "inherits": [
        "patomic-ci-base",
        "patomic-ci-compiler-unix-clang",
        "patomic-ci-flags-clang"
      ]
    },
    {
      "name": "patomic-ci-unix-clang-coverage",
      "inherits": [
        "patomic-ci-base-skip-install",
        "patomic-ci-compiler-unix-clang",
        "patomic-ci-flags-clang"
      ],
      "environment": {
        "CFLAGS": "-fprofile-instr-generate -fcoverage-mapping",
        "CXXFLAGS": "-fprofile-instr-generate -fcoverage-mapping",
        "LDFLAGS": "-fprofile-instr-generate -fcoverage-mapping"
      }
    },
    {
      "name": "patomic-ci-unix-clang-sanitize",
      "inherits": [
        "patomic-ci-base-skip-install",
        "patomic-ci-compiler-unix-clang",
        "patomic-ci-flags-clang"
      ],
      "environment": {
        "CFLAGS": "-fsanitize=address,undefined -fno-sanitize-recover -fno-omit-frame-pointer",
        "CXXFLAGS": "-fsanitize=address,undefined -fno-sanitize-recover -fno-omit-frame-pointer",
        "LDFLAGS": "-fsanitize=address,undefined"
      }
    },
    {
      "name": "patomic-ci-unix-gcc",
      "inherits": [
        "patomic-ci-base",
        "patomic-ci-compiler-unix-gcc",
        "patomic-ci-flags-gcc"
      ]
    },

    {
      "name": "patomic-ci-unix-gnu-ansi",
      "generator": "Ninja",
      "inherits": [
        "patomic-ci-base-skip-install"
      ],
      "cacheVariables": {
        "CMAKE_C_FLAGS": "-Wall -Wextra -Werror -Wpedantic -Wno-unused-function -Wno-atomic-alignment",
        "CMAKE_C_STANDARD": "90"
      }
    }
  ]
}