name: Run All Tests

on:
  pull_request:
    branches:
      - '**'
  push:
    branches:
      - 'feature/ghi-20-inner-stuff'

jobs:
  test-native:
    strategy:
      matrix:
        os:
          - macos
          - ubuntu
    uses: doodspav/patomic/.github/workflows/reusable-test-native.yml@feature/ghi-20-inner-stuff
    with:
      os: ${{ matrix.os }}
      preset: some-preset
      architecture: some-architecture
      triple: some-triple
      cmake_build_shared: ON

  test-qemu:
    strategy:
      matrix:
        os:
          - macos
          - ubuntu
    uses: doodspav/patomic/.github/workflows/reusable-test-qemu.yml@feature/ghi-20-inner-stuff
    with:
      preset: some-preset
      architecture: some-architecture
      triple: some-triple
      cmake_build_shared: ON
